import React from 'react';
import './App.css';
import { useState, useEffect } from 'react';
import axios from 'axios';

export default function App() {
  const [res, setRes] = useState([]);
  const [error, setError] = useState("");

  useEffect(() => {
    var options = {
      method: 'GET',
      url: 'https://api.ambeedata.com/weather/forecast/by-lat-lng?lat=12.9889055&lng=77.574044&filter=%7Bhourly%7Cminutely%7Cdaily%7D',
      headers: {
        "x-api-key": "b3b3017b389da9e311470af91231b13ebfb9831bd0082f5b5debd3b822d7dbab",
		"Content-type": "application/json"
      }
    };
    
    let apiData = '{"message":"success","data":{"lat":12.9889055,"lng":77.574044,"forecast":[{"time":1644395400,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":84.43,"apparentTemperature":84.43,"dewPoint":46.01,"humidity":0.26,"pressure":1011.8,"windSpeed":9.14,"windGust":9.25,"windBearing":99,"cloudCover":0.54,"uvIndex":7,"visibility":10,"ozone":250.6},{"time":1644399000,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":84.82,"apparentTemperature":84.82,"dewPoint":44.75,"humidity":0.25,"pressure":1010.9,"windSpeed":9.3,"windGust":9.41,"windBearing":103,"cloudCover":0.58,"uvIndex":5,"visibility":10,"ozone":250.5},{"time":1644402600,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":84.92,"apparentTemperature":84.92,"dewPoint":44.56,"humidity":0.24,"pressure":1010.7,"windSpeed":9.77,"windGust":9.83,"windBearing":107,"cloudCover":0.65,"uvIndex":3,"visibility":10,"ozone":250.8},{"time":1644406200,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":84.33,"apparentTemperature":84.33,"dewPoint":43.61,"humidity":0.24,"pressure":1010.7,"windSpeed":10.41,"windGust":10.41,"windBearing":112,"cloudCover":0.62,"uvIndex":1,"visibility":10,"ozone":250.6},{"time":1644409800,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":81.67,"apparentTemperature":81.67,"dewPoint":44.02,"humidity":0.27,"pressure":1011.2,"windSpeed":10.76,"windGust":13.46,"windBearing":118,"cloudCover":0.65,"uvIndex":0,"visibility":10,"ozone":250.1},{"time":1644413400,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":78.15,"apparentTemperature":78.15,"dewPoint":47.36,"humidity":0.34,"pressure":1011.9,"windSpeed":10.84,"windGust":18.11,"windBearing":118,"cloudCover":0.74,"uvIndex":0,"visibility":10,"ozone":249.9},{"time":1644417000,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":75.42,"apparentTemperature":75.42,"dewPoint":50.63,"humidity":0.42,"pressure":1012.5,"windSpeed":11.5,"windGust":21.36,"windBearing":117,"cloudCover":0.71,"uvIndex":0,"visibility":10,"ozone":250},{"time":1644420600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":73.28,"apparentTemperature":73.28,"dewPoint":53.22,"humidity":0.49,"pressure":1013,"windSpeed":12.29,"windGust":23.77,"windBearing":116,"cloudCover":0.66,"uvIndex":0,"visibility":10,"ozone":250.3},{"time":1644424200,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":71.06,"apparentTemperature":71.06,"dewPoint":55.07,"humidity":0.57,"pressure":1013.3,"windSpeed":12.43,"windGust":23.73,"windBearing":109,"cloudCover":0.61,"uvIndex":0,"visibility":10,"ozone":250.6},{"time":1644427800,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":68.65,"apparentTemperature":68.65,"dewPoint":56.24,"humidity":0.65,"pressure":1013.2,"windSpeed":12.11,"windGust":23.28,"windBearing":103,"cloudCover":0.53,"uvIndex":0,"visibility":10,"ozone":250.9},{"time":1644431400,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":66.47,"apparentTemperature":66.47,"dewPoint":57.58,"humidity":0.73,"pressure":1012.9,"windSpeed":11.33,"windGust":22.39,"windBearing":101,"cloudCover":0.52,"uvIndex":0,"visibility":10,"ozone":251.3},{"time":1644435000,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":64.9,"apparentTemperature":64.9,"dewPoint":58.53,"humidity":0.8,"pressure":1012.5,"windSpeed":10.3,"windGust":20.82,"windBearing":101,"cloudCover":0.53,"uvIndex":0,"visibility":10,"ozone":251.5},{"time":1644438600,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":63.83,"apparentTemperature":63.83,"dewPoint":57.92,"humidity":0.81,"pressure":1012.2,"windSpeed":9.54,"windGust":19.81,"windBearing":104,"cloudCover":0.53,"uvIndex":0,"visibility":10,"ozone":251.3},{"time":1644442200,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":61.97,"apparentTemperature":61.97,"dewPoint":56.89,"humidity":0.83,"pressure":1012,"windSpeed":8.38,"windGust":17.27,"windBearing":105,"cloudCover":0.55,"uvIndex":0,"visibility":10,"ozone":250.6},{"time":1644445800,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":59.46,"apparentTemperature":59.46,"dewPoint":56.42,"humidity":0.9,"pressure":1012,"windSpeed":7.26,"windGust":14.21,"windBearing":106,"cloudCover":0.53,"uvIndex":0,"visibility":10,"ozone":250.3},{"time":1644449400,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":57.74,"apparentTemperature":57.74,"dewPoint":55.98,"humidity":0.94,"pressure":1012.3,"windSpeed":6.98,"windGust":13.56,"windBearing":111,"cloudCover":0.53,"uvIndex":0,"visibility":10,"ozone":250.5},{"time":1644453000,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":57.03,"apparentTemperature":57.03,"dewPoint":55.51,"humidity":0.95,"pressure":1013,"windSpeed":6.64,"windGust":12.56,"windBearing":114,"cloudCover":0.46,"uvIndex":0,"visibility":10,"ozone":250.8},{"time":1644456600,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":57.51,"apparentTemperature":57.51,"dewPoint":55.55,"humidity":0.93,"pressure":1014,"windSpeed":6.32,"windGust":11.63,"windBearing":117,"cloudCover":0.42,"uvIndex":0,"visibility":10,"ozone":251.8},{"time":1644460200,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":60.72,"apparentTemperature":60.72,"dewPoint":55.86,"humidity":0.84,"pressure":1015,"windSpeed":6.8,"windGust":11.75,"windBearing":120,"cloudCover":0.46,"uvIndex":1,"visibility":10,"ozone":252.4},{"time":1644463800,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":66.95,"apparentTemperature":66.95,"dewPoint":55.03,"humidity":0.66,"pressure":1015.6,"windSpeed":7.37,"windGust":11.13,"windBearing":120,"cloudCover":0.43,"uvIndex":3,"visibility":10,"ozone":252.1},{"time":1644467400,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":73.36,"apparentTemperature":73.36,"dewPoint":50.58,"humidity":0.45,"pressure":1015.6,"windSpeed":7.51,"windGust":10.13,"windBearing":115,"cloudCover":0.39,"uvIndex":5,"visibility":10,"ozone":252.3},{"time":1644471000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":78.28,"apparentTemperature":78.28,"dewPoint":42.94,"humidity":0.29,"pressure":1014.9,"windSpeed":7.56,"windGust":9.28,"windBearing":105,"cloudCover":0.26,"uvIndex":8,"visibility":10,"ozone":251.5},{"time":1644474600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":81.63,"apparentTemperature":81.63,"dewPoint":37.43,"humidity":0.2,"pressure":1013.7,"windSpeed":7.75,"windGust":8.76,"windBearing":92,"cloudCover":0.15,"uvIndex":10,"visibility":10,"ozone":249.9},{"time":1644478200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":83.72,"apparentTemperature":83.72,"dewPoint":35.56,"humidity":0.18,"pressure":1012.3,"windSpeed":8.2,"windGust":8.48,"windBearing":80,"cloudCover":0.19,"uvIndex":10,"visibility":10,"ozone":249.1},{"time":1644481800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":85.08,"apparentTemperature":85.08,"dewPoint":34.19,"humidity":0.16,"pressure":1011,"windSpeed":8.62,"windGust":8.62,"windBearing":72,"cloudCover":0.24,"uvIndex":9,"visibility":10,"ozone":248.2},{"time":1644485400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":85.73,"apparentTemperature":85.73,"dewPoint":32.57,"humidity":0.15,"pressure":1010.1,"windSpeed":8.82,"windGust":8.82,"windBearing":69,"cloudCover":0.24,"uvIndex":6,"visibility":10,"ozone":247.1},{"time":1644489000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":86.05,"apparentTemperature":86.05,"dewPoint":31.23,"humidity":0.14,"pressure":1009.7,"windSpeed":9.03,"windGust":9.03,"windBearing":72,"cloudCover":0.22,"uvIndex":3,"visibility":10,"ozone":246.4},{"time":1644492600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":85.34,"apparentTemperature":85.34,"dewPoint":30.1,"humidity":0.14,"pressure":1009.8,"windSpeed":9.17,"windGust":9.17,"windBearing":77,"cloudCover":0.25,"uvIndex":1,"visibility":10,"ozone":246.7},{"time":1644496200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":82.27,"apparentTemperature":82.27,"dewPoint":31.58,"humidity":0.16,"pressure":1010.4,"windSpeed":9.06,"windGust":10.49,"windBearing":85,"cloudCover":0.24,"uvIndex":0,"visibility":10,"ozone":247},{"time":1644499800,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":78.17,"apparentTemperature":78.17,"dewPoint":36.22,"humidity":0.22,"pressure":1011.4,"windSpeed":8.99,"windGust":15.21,"windBearing":95,"cloudCover":0.13,"uvIndex":0,"visibility":10,"ozone":247.2},{"time":1644503400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":74.97,"apparentTemperature":74.97,"dewPoint":41.22,"humidity":0.3,"pressure":1012.3,"windSpeed":9.44,"windGust":20.37,"windBearing":100,"cloudCover":0.09,"uvIndex":0,"visibility":10,"ozone":247.3},{"time":1644507000,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":72.72,"apparentTemperature":72.72,"dewPoint":45.65,"humidity":0.38,"pressure":1012.9,"windSpeed":9.81,"windGust":22.44,"windBearing":98,"cloudCover":0.17,"uvIndex":0,"visibility":10,"ozone":247.1},{"time":1644510600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":70.82,"apparentTemperature":70.82,"dewPoint":49.23,"humidity":0.46,"pressure":1013.1,"windSpeed":9.98,"windGust":22.32,"windBearing":95,"cloudCover":0.25,"uvIndex":0,"visibility":10,"ozone":247.3},{"time":1644514200,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":69,"apparentTemperature":69,"dewPoint":52.14,"humidity":0.55,"pressure":1012.9,"windSpeed":10.17,"windGust":21.6,"windBearing":91,"cloudCover":0.33,"uvIndex":0,"visibility":10,"ozone":247.5},{"time":1644517800,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":67.26,"apparentTemperature":67.26,"dewPoint":54.4,"humidity":0.63,"pressure":1012.4,"windSpeed":9.81,"windGust":20.57,"windBearing":89,"cloudCover":0.29,"uvIndex":0,"visibility":10,"ozone":247.4},{"time":1644521400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":65.61,"apparentTemperature":65.61,"dewPoint":55.76,"humidity":0.7,"pressure":1011.9,"windSpeed":9.04,"windGust":19.47,"windBearing":90,"cloudCover":0.18,"uvIndex":0,"visibility":10,"ozone":247.2},{"time":1644525000,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":63.99,"apparentTemperature":63.99,"dewPoint":55.9,"humidity":0.75,"pressure":1011.5,"windSpeed":8.15,"windGust":17.86,"windBearing":91,"cloudCover":0.16,"uvIndex":0,"visibility":10,"ozone":247.1},{"time":1644528600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":61.77,"apparentTemperature":61.77,"dewPoint":54.95,"humidity":0.78,"pressure":1011.3,"windSpeed":7.46,"windGust":16.12,"windBearing":94,"cloudCover":0.27,"uvIndex":0,"visibility":10,"ozone":247.4},{"time":1644532200,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":59.52,"apparentTemperature":59.52,"dewPoint":54.08,"humidity":0.82,"pressure":1011.3,"windSpeed":6.89,"windGust":14.32,"windBearing":97,"cloudCover":0.35,"uvIndex":0,"visibility":10,"ozone":247.5},{"time":1644535800,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":57.88,"apparentTemperature":57.88,"dewPoint":52.89,"humidity":0.83,"pressure":1011.6,"windSpeed":6.65,"windGust":13.26,"windBearing":93,"cloudCover":0.26,"uvIndex":0,"visibility":10,"ozone":247.9},{"time":1644539400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":57.57,"apparentTemperature":57.57,"dewPoint":51.58,"humidity":0.8,"pressure":1012.4,"windSpeed":6.76,"windGust":13.07,"windBearing":90,"cloudCover":0.3,"uvIndex":0,"visibility":10,"ozone":248.6},{"time":1644543000,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":58.98,"apparentTemperature":58.98,"dewPoint":51.38,"humidity":0.76,"pressure":1013.4,"windSpeed":6.79,"windGust":13.77,"windBearing":86,"cloudCover":0.36,"uvIndex":0,"visibility":10,"ozone":249.1},{"time":1644546600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":63.83,"apparentTemperature":63.83,"dewPoint":50.75,"humidity":0.62,"pressure":1014.1,"windSpeed":7.48,"windGust":14.49,"windBearing":82,"cloudCover":0.3,"uvIndex":1,"visibility":10,"ozone":249.4},{"time":1644550200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":71.03,"apparentTemperature":71.03,"dewPoint":43.28,"humidity":0.38,"pressure":1014.6,"windSpeed":8.83,"windGust":14.32,"windBearing":81,"cloudCover":0.25,"uvIndex":3,"visibility":10,"ozone":249.4},{"time":1644553800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":76.89,"apparentTemperature":76.89,"dewPoint":29.74,"humidity":0.18,"pressure":1014.6,"windSpeed":10.33,"windGust":13.77,"windBearing":80,"cloudCover":0.23,"uvIndex":6,"visibility":10,"ozone":249.3},{"time":1644557400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":81.29,"apparentTemperature":81.29,"dewPoint":19.57,"humidity":0.1,"pressure":1014,"windSpeed":11.81,"windGust":12.95,"windBearing":78,"cloudCover":0.2,"uvIndex":9,"visibility":10,"ozone":249.2},{"time":1644561000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":84.06,"apparentTemperature":84.06,"dewPoint":14.47,"humidity":0.07,"pressure":1013,"windSpeed":12.47,"windGust":12.55,"windBearing":77,"cloudCover":0.14,"uvIndex":11,"visibility":10,"ozone":248.9},{"time":1644564600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":85.59,"apparentTemperature":85.59,"dewPoint":12.23,"humidity":0.06,"pressure":1011.6,"windSpeed":12.33,"windGust":12.33,"windBearing":79,"cloudCover":0.08,"uvIndex":11,"visibility":10,"ozone":248.4},{"time":1644568200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":86.46,"apparentTemperature":86.46,"dewPoint":12.26,"humidity":0.06,"pressure":1010.4,"windSpeed":12.05,"windGust":12.05,"windBearing":82,"cloudCover":0.05,"uvIndex":10,"visibility":10,"ozone":247.6}]}}';
    if(apiData) {
      apiData = JSON.parse(apiData);
      setRes(apiData?.data?.forecast);
    } else {
      axios
        .request(options)
        .then((response) => {
          console.log('res...', response);
          setRes(response?.data?.data?.forecast);
          sessionStorage.setItem("api-data",JSON.stringify(res));
        })
        .catch((error) => setError(error.message));
    }
  }, []);

  return <>
      <div className="t">
        {res.map((r,index) => 
        <div className="pr tl">
          <div className="pt b">{r.summary}  -  {r.temperature} °F</div>
          <div className="pt b">Humidity: {r.humidity}</div>
          <div className="pt b">Pressure: {r.pressure}</div>
          <div className="pt">Wind Speed: {r.windSpeed}</div>
        </div>
        )}
      </div>
      <div>{error}</div>
    </>;
}
